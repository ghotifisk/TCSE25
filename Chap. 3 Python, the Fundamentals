p.19 Rice and Chessboard

s = 0; n = 1; fv = 1
while n < 65:
    s = s + fv
    n = n +1
    fv = 2 * fv
print(s)

----------------------------------------

Example 3.1 sqrt

from math import sqrt
n = 10; x = 2
for _ in range(n): x = sqrt(x)
for _ in range(n): x = x**2
print(x)

p. 28 while loop

index = 1
while index < 3:
    print(f"{index} times 5 is {5*index}")
    index += 1

---------------

Example 3.2

n, sm = 100, 0
for i in range(1, n+1): sm += i
print(f"The sum is {sm}")  # Out: 5050

---------------

Example 3.3 Collatz

n = 100  # input
while n > 1:
    if n % 2 == 0: n //= 2  # integer division
    else: n = 3*n + 1
    print(n)
print('reached 1')

---------------

Machine Epsilon

eps, i = 1.0, 0
while 1 + eps > 1:
    eps /= 2
    i += 1
eps *= 2  
print(eps); print(i)

eps, i = 1.0, 0
while eps > 0:
    eps /= 2
    i += 1
print(eps); print(i) 

---------------

Example 3.4 Sieve of Eratosthenes

n = 10                    # input upper limit
L = list(range(2, n+1))   # constructs a list from  range()
P = []                    # [] denotes the empty list
while L != []: 
    p = L[0]              # the smallest number still in L
    P.append(p)           # is appended to the end of P
    for i in L:
        if i % p == 0: L.remove(i)
print(P)

---------------

Example 3.5 Factorial

def factorial(n):
    res = 1
    for i in range(1, n+1): res *= i
    return res
print(factorial(4))  # Out: 24

---------------

Example 3.6 Functions as arguments

def g(x): return 4*x*(1 - x)
print(vmax(g,7))  # Out: 0.9795918367346939

---------------

Example 3.7 Functions as return values

def ddx(f):
    h = 1.e-6
    def f_prime(x): return (f(x+h) - f(x)) / h
    return f_prime
def g(x): return 4*x*(1 - x)
print(ddx(g)(0.3))  # Out: 1.5999960000234736
dgdx = ddx(g)
print(dgdx(0.5))    # Out: -4.0000225354219765e-06

---------------

Example 3.8 Recursive factorial

def factorial_rec(n):
    if n == 0: return 1
    return n*factorial_rec(n-1)
    
def factorial_rec(n): return 1 if n == 0 else n*factorial_rec(n-1)

---------------
    
Example 3.10 Euclidean algorithm

def gcd(a,b): return a if b == 0 else gcd(b, a % b)

---------------

Example 3.11 Fibonacci

def fib(n): return 1 if n == 1 or n == 2 else fib(n-1) + fib(n-2)

---------------

Example 3.12 Ackermann

def ack(x,y):
    if x == 0: return y + 1
    if y == 0: return ack(x-1, 1)
    return ack(x-1, ack(x, y-1))
    
---------------
    
Example 3.13 Quicksort

def qsort(lst):
    if lst == []: return []
    p = lst[0]   # pivot element
    sml = qsort([x for x in lst[1:] if x < p])
    grt = qsort([x for x in lst[1:] if x >= p])
    return sml + [p] + grt
    
testList = [4, 5, 7, 3, 8, 3]
print(qsort(testList))  # out: [3, 3, 4, 5, 7, 8]

---------------

String formatting

Example 3.14 

pi = 3.14159  # The constant pi is not part of core Python
tmplt = '|{:2d}| times pi is |{:6.2f}|'
for n in [3, 4, 10, 100]:
    outpt = tmplt.format(n, n*pi)
    print(outpt)
   

---------------

p. 39 Writing strings

wf = open('parrot.txt', 'w')
wf.write('The parrot is dead!\n')
wf.write('It is only resting.')
wf.close()

---------------

p. 40 Writing strings

rf = open('parrot.txt', 'r')
fstr = rf.read()
print(fstr)

---------------
    
Example 3.17 Number Strings

tbl = [[1, 2, 3], [4, 5, 6]]
tblstrg = '' 
for r in tbl: 
    for num in r: tblstrg += f" {num}" 
    tblstrg += '\n'  
    
row_lst = tblstrg.split('\n')
in_tbl = []
for r in row_lst: 
    nums  = [int(c) for c in r.split()]
    if nums == []: break  
    in_tbl.append(nums)
print(in_tbl)
    
---------------
    
Example 3.18 Pickle

from pickle import dump, load
tbl = [[1, 2, 3], [4, 5, 6]]  # input
fwb = open('datafile.pkl', 'wb') 
dump(tbl, fwb)  # write
fwb.close()
frb = open('datafile.pkl', 'rb')
in_tbl = load(frb)  # read
print(in_tbl)

---------------

     
Example 3.19 Class Fraction

class Fraction:
    def __init__(self, num, den):  # initialization
        self.num = num             # internal storage
        self.den = den 
        
    def add(self, b):             # fraction addition
        return Fraction(self.num * b.den + b.num * self.den, 
                        self.den * b.den ) 
     #  __add__ infix operator 
               
    def isEqualTo(self, b):       # equality between fractions
        return True if self.num * b.den == self.den * b.num else False
        
     # __eq__ infix operator
     
a = Fraction(3,4)
b = Fraction(1,2)
c = a.add(b)
print(c.num, c.den) # 10, 8 

d = b.add(a)  
c.isEqualTo(d)  # Out: True   
     
---------------


Example 3.20  Polynomial

class Polynomial:

    def __init__(self, coeff):  # data initialization
        self.coeff = coeff      # internal storage
        
    def __call__(self, x):      # method polynomial application
        s = 0
        for i in range(len(self.coeff)): s += self.coeff[i] * x**i
        return s
        
    def __add__(self, q):   # method polynomial addition
        l = []
        if len(self.coeff) > len(q.coeff):
            l += self.coeff   
            for i in range(len(q.coeff)): l[i] += q.coeff[i]                
        else: 
            l += q.coeff
            for i in range(len(self.coeff)): l[i] += self.coeff[i]
        return Polynomial(l)
        
    def __mul__(self, q):   # method polynomial multiplication
        d1, d2 = len(self.coeff), len(q.coeff)
        l = [0 for i in range(d1 + d2 - 1)]
        for i in range(d1):
            for j in range(d2): l[i+j] += self.coeff[i] * q.coeff[j]
        return Polynomial(l)
        
    def __eq__(self, q): 
        d = len(self.coeff) 
        if d != len(q.coeff): return False
        for i in range(d):
            if abs(self.coeff[i] - q.coeff[i]) > 1.e-14: return False
        return True
        
    def __add__(self, q):  # method polynomial addition
        lst = []
        if len(self.coeff) > len(q.coeff):
            lst += self.coeff   
            for i in range(len(q.coeff)): 
                lst[i] += q.coeff[i]                
        else: 
            lst += q.coeff
            for i in range(len(self.coeff)): 
                lst[i] += self.coeff[i]
        return Polynomial(lst)

    def __mul__(self, q):  # method polynomial multiplication
        d1, d2 = len(self.coeff), len(q.coeff)
        lst = [0 for i in range(d1 + d2 - 1)]
        for i in range(d1):
            for j in range(d2): 
                lst[i+j] += self.coeff[i]*q.coeff[j]
        return Polynomial(lst)
        
    def __eq__(self, q): 
        d = len(self.coeff) 
        if d != len(q.coeff): return False
        for i in range(d):
            if abs(self.coeff[i] - q.coeff[i]) > 1.e-14: 
                return False
        return True

        
p = Polynomial([1, 2, 3])
print(p(4))  # Out: 57

q = Polynomial([3,4,5])
r = Polynomial([6,7,8,9])

print(p*(q + r) == p*q + p*r)  # Out: True 
        
---------------
      
class Parabola(Polynomial):   # subclass

    def __init__(self, coefficients):  
            if len(coefficients) != 3: 
                print('no parabola')
                return
            else: super().__init__(coefficients)
            
    def roots(self): 
        print('To be implemented')
        return
        
    def __add__(self, q): 
        l = [0, 0, 0]
        for i in range(3): l[i] += self.coeff[i] + q.coeff[i]
        return Parabola(l)
        
